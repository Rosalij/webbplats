<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: geocoding.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: geocoding.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

/**
 * Fetches coordinates (latitude &amp; longitude) for location name.
 * @param {string} location - The name of the location.
 * @returns {Promise&lt;{latitude: number, longitude: number} | undefined>} coordinates if found.
 */
export async function getCoordinates(location) {
	try {
		const response = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(location)}&amp;count=1`);
		const data = await response.json();
		if (data.results &amp;&amp; data.results.length > 0) {
			const { latitude, longitude } = data.results[0];
			return { latitude, longitude };
		} else {
			throw new Error("Location not found");
		}
	} catch (error) {
		console.error("Geocoding error:", error);
	}
}




/**
 * Do reverse geocoding to find the city and country from coordinates.
 * @param {number} latitude
 * @param {number} longitude
 * @returns {Promise&lt;{city: string, country: string | undefined}>} location info.
 */
export async function getLocation(latitude, longitude) {
	try {
		const response = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${latitude}&amp;lon=${longitude}&amp;format=json`);
		const data = await response.json();
		if (data &amp;&amp; data.address) {
			const city = data.address.city || data.address.town || data.address.village || data.address.hamlet || "Unknown city";
			const country = data.address.country || "Unknown country";
			return { city, country };
		} else {
			throw new Error("Location not found");
		}
	} catch (error) {
		console.error("Reverse geocoding error:", error);
	}
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#fetchData">fetchData</a></li><li><a href="global.html#fetchSurfData">fetchSurfData</a></li><li><a href="global.html#getCoordinates">getCoordinates</a></li><li><a href="global.html#getLocation">getLocation</a></li><li><a href="global.html#loadSunriseSunset">loadSunriseSunset</a></li><li><a href="global.html#readSurfData">readSurfData</a></li><li><a href="global.html#readWeatherData">readWeatherData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Aug 07 2025 14:21:25 GMT+0200 (centraleuropeisk sommartid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
